<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MeadCalc - Mead Calculator</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <div class="logo-container">
                <img src="MeadCalc_logo.png" alt="MeadCalc Logo" class="logo">
                <h1>MeadCalc</h1>
            </div>
            <p>Calculate ABV, Specific Gravity, and Sweetener Amounts for Mead Making</p>
        </header>

        <!-- Unit Selection -->
        <div class="unit-selector">
            <h3>Units:</h3>
            <div class="unit-options">
                <label class="unit-option">
                    <input type="radio" name="weight-units" value="imperial" checked onclick="updateWeightUnits()">
                    <span>Imperial (lbs/oz)</span>
                </label>
                <label class="unit-option">
                    <input type="radio" name="weight-units" value="metric" onclick="updateWeightUnits()">
                    <span>Metric (kg/g)</span>
                </label>
            </div>
            <div class="unit-options">
                <label class="unit-option">
                    <input type="radio" name="volume-units" value="imperial" checked onclick="updateVolumeUnits()">
                    <span>Gallons</span>
                </label>
                <label class="unit-option">
                    <input type="radio" name="volume-units" value="metric" onclick="updateVolumeUnits()">
                    <span>Liters</span>
                </label>
            </div>
        </div>

        <!-- Unified Brewing Calculator -->
        <div class="calc-section" style="margin-bottom: 25px;">
            <h2>Brewing Calculator</h2>
            
            <!-- Mode Selector -->
            <div style="margin-bottom: 20px;">
                <h3 style="color: #d4af37; margin-bottom: 10px;">Calculation Mode:</h3>
                <div style="display: flex; gap: 20px; flex-wrap: wrap;">
                    <label style="display: flex; align-items: center; gap: 10px; padding: 12px 20px; background: #2a2a2a; border: 1px solid #555; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; min-width: 250px;">
                        <input type="radio" name="calc-mode" value="abv-from-ingredients" checked style="accent-color: #d4af37;" onchange="switchUnifiedMode(this.value)">
                        <span style="color: #ffffff; transition: color 0.3s ease;">Calculate ABV from Ingredients</span>
                    </label>
                    <label style="display: flex; align-items: center; gap: 10px; padding: 12px 20px; background: #2a2a2a; border: 1px solid #555; border-radius: 6px; cursor: pointer; transition: all 0.3s ease; min-width: 250px;">
                        <input type="radio" name="calc-mode" value="ingredients-from-abv" style="accent-color: #d4af37;" onchange="switchUnifiedMode(this.value)">
                        <span style="color: #ffffff; transition: color 0.3s ease;">Calculate Ingredients for Target ABV</span>
                    </label>
                </div>
            </div>

            <!-- Calculator Content -->
            <div id="unified-calculator-content">
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; min-height: 400px;">
                    <!-- Input Section -->
                    <div style="background: linear-gradient(135deg, #2d2d2d 0%, #3a3a3a 100%); padding: 25px; border-radius: 8px; border: 1px solid #555;">
                        <h3 style="color: #d4af37; font-size: 1.4rem; margin-bottom: 20px; border-bottom: 1px solid #d4af37; padding-bottom: 8px;">Recipe Inputs</h3>
                        
                        <div class="input-group">
                            <label for="unified-batch-size" id="unified-abv-batch-label">Batch Size (gallons):</label>
                            <input type="number" id="unified-batch-size" step="0.1" min="0.1" max="50" value="1" placeholder="1" oninput="calculateUnifiedABVMode()">
                        </div>

                        <div class="input-group honey-input">
                            <label for="unified-honey-amount" id="unified-abv-honey-label">Honey (lbs):</label>
                            <div class="weight-input-container">
                                <input type="number" id="unified-honey-amount" step="1" min="0" placeholder="3" oninput="calculateUnifiedABVMode()">
                                <input type="number" id="unified-honey-oz" step="1" min="0" max="15" placeholder="0" class="oz-input" style="display:inline-block;" oninput="handleUnifiedWeightOverflow(this, 'unified-honey-amount'); calculateUnifiedABVMode()">
                                <span class="oz-label" style="display:inline-block;">oz</span>
                            </div>
                            <small id="unified-honey-conversion" class="conversion-display"></small>
                        </div>

                        <div class="ingredients-section">
                            <h4>Additional Ingredients</h4>
                            <div id="unified-abv-ingredients-list">
                                <!-- Dynamic ingredient inputs will be added here -->
                            </div>
                            <div class="ingredient-controls">
                                <button type="button" id="unified-abv-add-ingredient-btn" class="add-btn" onclick="addUnifiedABVIngredient()">+ Add Ingredient</button>
                                <button type="button" id="unified-abv-reset-btn" class="reset-btn" style="margin-left: 10px;" onclick="resetUnifiedABVMode()">Reset All</button>
                            </div>
                        </div>
                    </div>

                    <!-- Results Section -->
                    <div style="background: linear-gradient(135deg, #1a3a1a 0%, #2d5a2d 100%); padding: 25px; border-radius: 8px; border: 1px solid #4a7c59;">
                        <h3 style="color: #d4af37; font-size: 1.4rem; margin-bottom: 20px; border-bottom: 1px solid #d4af37; padding-bottom: 8px;">Calculated Results</h3>
                        <div id="unified-abv-results">
                            <div style="color: #90ee90; margin-bottom: 15px;">Enter ingredients to see calculated ABV and gravity</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Simple Calculators Row -->
        <div class="calculator-grid">
            <!-- Simple ABV Calculator -->
            <div class="calc-section">
                <h2>Simple ABV Calculator</h2>
                <div class="abv-inputs-row">
                    <div class="input-group">
                        <label for="og">Original Gravity (OG):</label>
                        <input type="number" id="og" step="0.001" min="1.000" max="1.200" placeholder="1.090" oninput="calculateABVRealTime()">
                    </div>
                    <div class="input-group">
                        <label for="fg">Final Gravity (FG):</label>
                        <input type="number" id="fg" step="0.001" min="0.990" max="1.050" placeholder="1.000" oninput="calculateABVRealTime()">
                    </div>
                    <div class="result" id="abv-result"></div>
                </div>
            </div>

            <!-- Alcohol & Gravity Converter -->
            <div class="calc-section">
                <h2>Alcohol & Gravity Converter</h2>
                <p class="description">Convert between different alcohol and gravity measurement standards</p>
                
                <div class="input-group">
                    <label for="conversion-input">Value:</label>
                    <input type="number" id="conversion-input" step="0.001" placeholder="Enter value">
                </div>
                
                <div class="input-group">
                    <label for="conversion-from">Convert From:</label>
                    <select id="conversion-from">
                        <option value="abv">ABV (%)</option>
                        <option value="abw">ABW (%)</option>
                        <option value="sg">Specific Gravity (SG)</option>
                        <option value="brix">BRIX (°Bx)</option>
                        <option value="baume">Baumé (°Bé)</option>
                    </select>
                </div>
                
                <div id="conversion-result" class="result"></div>
            </div>
        </div>

        <div class="calculator-grid">

            <!-- Quick Reference -->
            <div class="calc-section">
                <h2>Quick Reference</h2>
                <div class="reference-content">
                    <div class="collapsible-section">
                        <h3 class="collapsible-header" onclick="toggleSection('specific-gravity')">
                            <span class="toggle-icon">▶</span> Specific Gravity Ranges
                        </h3>
                        <div class="collapsible-content" id="specific-gravity">
                            <ul>
                                <li><strong>Light:</strong> 1.035-1.050 OG</li>
                                <li><strong>Medium:</strong> 1.051-1.070 OG</li>
                                <li><strong>Strong:</strong> 1.071-1.130+ OG</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header" onclick="toggleSection('honey-guidelines')">
                            <span class="toggle-icon">▶</span> Honey Guidelines
                        </h3>
                        <div class="collapsible-content" id="honey-guidelines">
                            <ul>
                                <li><strong>Light Mead:</strong> 2-2.5 lbs honey per gallon</li>
                                <li><strong>Medium Mead:</strong> 3-3.5 lbs honey per gallon</li>
                                <li><strong>Strong Mead:</strong> 4+ lbs honey per gallon</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header" onclick="toggleSection('abv-types')">
                            <span class="toggle-icon">▶</span> Common Mead Types by ABV
                        </h3>
                        <div class="collapsible-content" id="abv-types">
                            <ul>
                                <li><strong>Session Mead:</strong> 3-7% ABV</li>
                                <li><strong>Traditional Mead:</strong> 8-15% ABV</li>
                                <li><strong>Sack Mead:</strong> 14-20% ABV</li>
                            </ul>
                        </div>
                    </div>

                    <div class="collapsible-section">
                        <h3 class="collapsible-header" onclick="toggleSection('traditional-types')">
                            <span class="toggle-icon">▶</span> Traditional Mead Types
                        </h3>
                        <div class="collapsible-content" id="traditional-types">
                            <ul>
                                <li><strong>Traditional:</strong> Honey and water only</li>
                                <li><strong>Melomel:</strong> Honey with fruit</li>
                                <li><strong>Cyser:</strong> Honey with apples or apple juice</li>
                                <li><strong>Pyment:</strong> Honey with grapes or grape juice</li>
                                <li><strong>Metheglin:</strong> Honey with herbs and/or spices</li>
                                <li><strong>Braggot:</strong> Honey with malt (beer-mead hybrid)</li>
                                <li><strong>Acerglyn:</strong> Honey with maple syrup</li>
                                <li><strong>Bochet:</strong> Made with caramelized/burned honey</li>
                                <li><strong>Capsicumel:</strong> Honey with peppers/chiles</li>
                                <li><strong>Hippocras:</strong> Pyment with herbs and spices</li>
                                <li><strong>Oxymela:</strong> Honey with vinegar (historical)</li>
                                <li><strong>Rhodomel:</strong> Honey with rose petals/hips</li>
                                <li><strong>Morat:</strong> Honey with mulberries</li>
                                <li><strong>Omphacomel:</strong> Honey with verjuice (unripe grapes)</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script src="calculator.js"></script>
    <script>
        // Ensure select-all functionality works
        setTimeout(() => {
            addSelectAllOnDoubleClick();
        }, 500);
    </script>
</body>
</html>